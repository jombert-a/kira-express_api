<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <h1>тестовая конфигурация</h1>
        <form onsubmit="onSubmitSendUser(event)"> 
            <h4>Добавление пользователя</h4>
            <label>
                <p>email</p>
                <input type="text" id="sendUserEmail">
            </label>
            <label>
                <p>пароль</p>
                <input type="text" id="sendUserPassword">
            </label> 
            <button type="submit">
                Отправить
            </button>
        </form>
        
        <form onsubmit="return onSubmitSendDevice(event)"> 
            <h4>Добавление устройства</h4>
            <label>
                <p>email</p>
                <input type="text" id="sendDeviceEmail">
            </label>
            <label>
                <p>serial</p>
                <input type="text" id="sendDeviceSerial">
            </label> 
            <button type="submit">
                Отправить
            </button>
        </form>
        <h3>Лампочка</h3>
        <button onclick="turnon()">Включить</button>
        <button onclick="turnoff()">Выключить</button>
        <h3>админ панель</h3>
        <button onclick="reedDevices()">Прочитать json</button>
    </div>
</body>
</html>

<script>
    function onSubmitSendUser(e) {
        e.preventDefault()
        let email = document.querySelector('#sendUserEmail').value
        let password = document.querySelector('#sendUserPassword').value
        console.log(name, password);
        fetch('/api/user/registration', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({email, password})
        })
    }
    function onSubmitSendDevice(e) {
        e && e.preventDefault()
        let email = document.querySelector('#sendDeviceEmail').value
        let serial = document.querySelector('#sendDeviceSerial').value
        fetch('/api/device', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({email, serial})
        })
    }
    function turnon() {
        fetch('/api/device/led', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({status: "1"})
        })
    }
    function turnoff() {
        fetch('/api/device/led', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({status: "0"})
        })
    }
    function reedDevices() {
        fetch('/api/admin/read/devices', {
            method: 'GET'
        })
    }
</script>